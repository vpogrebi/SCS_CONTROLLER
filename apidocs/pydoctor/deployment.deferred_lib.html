<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>API docs for &ldquo;deployment.deferred_lib&rdquo;</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    
    
  </head>
  <body>
    <h1 class="module">Module d.deferred_lib</h1>
    <p>
      <span id="part">Part of <a href="deployment.html">deployment</a></span>
      
      
    </p>
    <div>
      
    </div>
    <pre>Created on Jul 17, 2009

@author: valeriypogrebitskiy

Main purpose of deferred_lib.py - is to provide a simple decorator (@deferred) that can be used
to turn any blocking methods into non-blocking, asynchronous methods. By using this decorator,
decorated (blocking) methods are forced to return a deferred (instance of twisted.internet.defer.Deferred class)
that 'fires' when method completes its execution. Thus, calling Python code will not have to block, 
waiting for the method to complete.

This functionality is essential to any implementation that uses Twisted framework

'@deferred' decorator is simply a reference to twisted.internet.threads.deferToThread() method's getter:

deferred = deferToThread.__get__

In addition to providing @deferred decorator, this module offers two "convenience" methods:

sleep() - Asynchronous (non-blocking) wrapper for standard Python's time.sleep()
sleep_fail() - Same as sleep(), but intended to raise RuntimeError exception after sleeping

Both sleep() and sleep_fail() are designed as deferred callback handler methods (take extra 
first argument &lt;nothing&gt;), and are convenient to be used for Twisted code's unit testing</pre>
    
    
    <div id="splitTables">
      <table class="children sortable" id="id32">
  
  
  
  
  <tr class="function">
    
    
    <td>Function</td>
    <td><a href="deployment.deferred_lib.html#sleep">sleep</a></td>
    <td><tt>Sleep for &lt;secs&gt; number of seconds. This is an asynchronous (non-blocking) wrapper for </tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="deployment.deferred_lib.html#sleep_fail">sleep_fail</a></td>
    <td><tt>Raise 'RuntimeError, &lt;err_msg&gt;' exception after 'sleeping' for &lt;secs&gt; number of seconds</tt></td>
  </tr>
  
</table>
      
      
    </div>
    
    
    
    <div class="function">
        <a name="deployment.deferred_lib.sleep"></a>
        <a name="sleep"></a>
        <div class="functionHeader">
        @deferred<br />
        def sleep(nothing, secs):
        
      </div>
        <div class="functionBody">
          
          <pre>Sleep for &lt;secs&gt; number of seconds. This is an asynchronous (non-blocking) wrapper for 
standard Python's time.sleep(). It is designed as a deferred's callback handler 
(takes extra &lt;nothing&gt; argument that is provided by deferred)

@param nothing: non-important argument (provided by deferred that has 'fired' this callback)
@param secs: number of seconds to sleep</pre>
        </div>
      </div><div class="function">
        <a name="deployment.deferred_lib.sleep_fail"></a>
        <a name="sleep_fail"></a>
        <div class="functionHeader">
        @deferred<br />
        def sleep_fail(nothing, secs, err_msg):
        
      </div>
        <div class="functionBody">
          
          <pre>Raise 'RuntimeError, &lt;err_msg&gt;' exception after 'sleeping' for &lt;secs&gt; number of seconds
This is an asynchronous (non-blocking) wrapper for standard Python's time.sleep(). It is
designed as a deferred's callback handler (takes extra &lt;nothing&gt; argument that is provided by deferred)

@param nothing: non-important argument (provided by deferred that has 'fired' this callback)
@param secs: number of seconds to sleep
@param err_msg: error message to be added to RuntimeError exception

@raise RuntimeError: unconditionally raises exception - this is main purpose of this method</pre>
        </div>
      </div>
    
    <address>
      <a href="index.html">API Documentation</a> for 'SCS Controller', generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a> at 2009-10-07 17:27:47.
    </address>
  </body>
</html>